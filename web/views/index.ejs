<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOVIECORN - Inicio</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/index.css' />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Koulen&family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=close" />
  </head>
  <body>

    <header class="centered-row">
      <a href="/inicio">
        <div class="logo centered-row">
          <span id="movie">MOVIE</span>
          <span id="corn">CORN</span>
        </div>
      </a>
    </header>

    <main>
      <div class="greeting centered-col">
        <div>
          <h2>¡BIENVENIDO A MOVIECORN!</h2>
          <h2>ALL YOUR MOVIES IN ONE LIBRARY</h2>
        </div>
        <div>
          <p>¡Entra a ver tu biblioteca!</p>
          <div class="buttons">
            <!-- Aqui van los botones que se hacen en index.js -->
          </div>
        </div>
      </div>
      <div class="updates">
        <h2>ULTIMAS ACTUALIZACIONES DE USUARIOS:</h2>
        <div class="carousel-container">
          <div id="carousel">
            
            <% for (let movie of carouselMovies) { %>
              <div class="movie <%= movie.id %>">
                <img src="<%= movie.imagen %>" alt="Imagen de <%= movie.titulo %>">
                <div class="inner">
                  <div>
                    <h2><%= movie.titulo %></h2>
                  </div>
                </div>
              </div> 
            <% } %>


          </div>
        </div>
      </div>
      <div class="contact">
        <h2>SI NECESITAS AYUDA CONTACTA CON<br>NUESTRO SERVICIO TECNICO</h2>
        <a class="btn">Contactar</a>
      </div>
    </main>

    <dialog id="contact">

      <form action="#" method="dialog" class="centered-col">
        
        <h2 class="title">Contacta con nosotros</h2>
        <div>
          <label for="input1">Asunto:</label>
          <input type="text" name="subject" id="input1">
        </div>
        <div>
          <label for="input1">Asunto:</label>
          <textarea name="description" id=""></textarea>
        </div>
        <button class="btn">Contactar</button>

      </form>
      <a class="btn centered-row" href="">
        <span class="material-symbols-outlined">close</span>
      </a>

    </dialog>

    <script>

      document.querySelectorAll("div.movie").forEach((e) => {
          e.addEventListener('click', (event) => {
              const dialog = document.querySelector("dialog#lightbox");
              const form = dialog.querySelector("form");
              const id = e.className.split(" ")[1];
              const movie = carouselMovies.find((e) => e.id == id);
              
              dialog.querySelector("img").src = movie.imagen;
              form.querySelector(".title").textContent = movie.titulo;
              form.querySelector(".year").textContent = movie.anho + " " + movie.tipo + " [" + movie.estado + "]";
              form.querySelector(".genre").textContent = movie.generos
              form.querySelector(".director").textContent = "Dirigida por " + movie.director;
              form.querySelector(".descp").textContent = movie.descripcion;

              dialog.showModal();

          })

      });

    </script>
    <script src="/javascripts/index.js"></script>

  </body>
</html>